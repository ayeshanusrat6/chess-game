<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chess Game</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: url('https://upload.wikimedia.org/wikipedia/commons/3/3d/Chess_board_opening_staunton.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
      text-align: center;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 20px;
      background: rgba(0,0,0,0.6);
    }
    header h1 {
      margin: 0;
      font-size: 28px;
    }
    #coinCounter {
      font-size: 18px;
      color: gold;
      font-weight: bold;
    }
    main {
      margin-top: 80px;
    }
    button {
      display: block;
      margin: 20px auto;
      padding: 15px 30px;
      font-size: 20px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background: rgba(0,0,0,0.7);
      color: white;
      transition: 0.3s;
    }
    button:hover {
      background: gold;
      color: black;
    }
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
    }
    .modal-content {
      background: #222;
      margin: 100px auto;
      padding: 20px;
      width: 300px;
      border-radius: 15px;
      position: relative;
      color: white;
    }
    .close {
      position: absolute;
      top: 10px; right: 15px;
      font-size: 22px;
      cursor: pointer;
      color: red;
    }
    .bet-option {
      background: #444;
      padding: 15px;
      margin: 10px 0;
      border-radius: 10px;
      cursor: pointer;
      color: gold;
    }
    .bet-option:hover {
      background: gold;
      color: black;
    }
    #matchmaking {
      display: none;
      margin-top: 50px;
      font-size: 24px;
    }
  </style>
</head>
<body>
  <header>
    <h1>♟ Chess</h1>
    <div id="coinCounter">Coins: 50</div>
  </header>

  <main>
    <button onclick="openOnline()">Play Online</button>
    <button onclick="alert('Offline mode coming soon!')">Play Offline</button>
    <button onclick="alert('Move pieces and checkmate your opponent!')">How to Play</button>

    <div id="matchmaking"></div>
  </main>

  <!-- Modal for Bets -->
  <div id="betModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h2>Select Bet</h2>
      <div class="bet-option" onclick="chooseBet(5,10)">5 Coins → Win 10</div>
      <div class="bet-option" onclick="chooseBet(10,20)">10 Coins → Win 20</div>
      <div class="bet-option" onclick="chooseBet(15,30)">15 Coins → Win 30</div>
    </div>
  </div>

  <script>
    let coins = 50;
    let timerInterval;

    function updateCoins() {
      document.getElementById('coinCounter').innerText = "Coins: " + coins;
    }

    function openOnline() {
      if(coins <= 0){
        alert("No more coins!");
        return;
      }
      document.getElementById('betModal').style.display = 'block';
    }

    function closeModal() {
      document.getElementById('betModal').style.display = 'none';
    }

    function chooseBet(bet, win) {
      if(coins < bet){
        alert("Not enough coins!");
        return;
      }
      coins -= bet;
      updateCoins();
      closeModal();
      startMatchmaking(bet, win);
    }

    function startMatchmaking(bet, win) {
      let matchmakingDiv = document.getElementById('matchmaking');
      matchmakingDiv.style.display = 'block';
      let timeLeft = 30;
      matchmakingDiv.innerText = `Searching for a player... ${timeLeft}s`;
      timerInterval = setInterval(()=>{
        timeLeft--;
        matchmakingDiv.innerText = `Searching for a player... ${timeLeft}s`;
        if(timeLeft<=0){
          clearInterval(timerInterval);
          matchmakingDiv.innerText = "No player found. Try later.";
          setTimeout(()=>{
            matchmakingDiv.style.display = 'none';
          }, 3000);
        }
      },1000);

      // Simulate finding a player in 5 sec
      setTimeout(()=>{
        clearInterval(timerInterval);
        let winner = Math.random()>0.5 ? "You" : "Opponent";
        if(winner=="You"){ coins += win; updateCoins(); }
        matchmakingDiv.innerText = `${winner} won the match!`;
        setTimeout(()=>{ matchmakingDiv.style.display = 'none'; }, 4000);
      },5000);
    }

    updateCoins();
  </script>
</body>
</html>
